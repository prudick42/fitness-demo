<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç</h1>
        <a href="{{ url_for('dashboard') }}">‚Üê –ù–∞–∑–∞–¥ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a>
        
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                        <div class="alert">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        <div class="stats-card">
            <h2>üìä –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞</h2>
            <p class="big-number">{{ "%.2f"|format(total_revenue) }} ‚ÇΩ</p>
        </div>
        
        <div class="report-section">
            <h3>üìà –í—ã—Ä—É—á–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º</h3>
            {% if monthly_data %}
            <table>
                <thead>
                    <tr>
                        <th>–ú–µ—Å—è—Ü</th>
                        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–∂</th>
                        <th>–í—ã—Ä—É—á–∫–∞</th>
                    </tr>
                </thead>
                <tbody>
                    {% for month in monthly_data %}
                    <tr>
                        <td>{{ month[0] }}</td>
                        <td>{{ month[1] }}</td>
                        <td>{{ "%.2f"|format(month[2]) }} ‚ÇΩ</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥–∞–∂–∞—Ö</p>
            {% endif %}
        </div>
        
        <div class="report-section">
            <h3>üé´ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞–º</h3>
            {% if subscription_stats %}
            <table>
                <thead>
                    <tr>
                        <th>–¢–∏–ø –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</th>
                        <th>–ü—Ä–æ–¥–∞–Ω–æ</th>
                        <th>–í—ã—Ä—É—á–∫–∞</th>
                        <th>–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stat in subscription_stats %}
                    <tr>
                        <td>{{ stat[0] }}</td>
                        <td>{{ stat[1] }}</td>
                        <td>{{ "%.2f"|format(stat[2]) }} ‚ÇΩ</td>
                        <td>{{ "%.2f"|format(stat[3]) }} ‚ÇΩ</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥–∞–∂–∞—Ö –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤</p>
            {% endif %}
        </div>
    </div>
</body>
</html>